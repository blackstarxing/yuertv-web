!function(e){function s(o){if(n[o])return n[o].exports;var t=n[o]={exports:{},id:o,loaded:!1};return e[o].call(t.exports,t,t.exports,s),t.loaded=!0,t.exports}var n={};return s.m=e,s.c=n,s.p="./",s(0)}([function(e,s,n){n(7),e.exports=n(1)},function(e,s){$(function(){$("#leftmain li").on("click",function(e){e.preventDefault(),console.log($(this).index()),$(this).addClass("rightswitchcolor").siblings().removeClass("rightswitchcolor"),$("div.rightswitch").eq($(this).index()-1).show().siblings().hide()}),$(".m-bottom a").on("click",function(e){e.preventDefault(),$(this).addClass("switch").siblings().removeClass("switch"),$(".switch-content").hide().eq($(this).index()).show()}),$(".m-bottom a:eq(0)").trigger("click"),$(".imgprops .u-props").off("click").on("click",function(e){e.preventDefault(),$(".u-propsgtips").show()}),$(".m-mainm a").on("click",function(e){e.preventDefault(),$(this).addClass("focuscurrent").siblings().removeClass("focuscurrent"),$(".mcurrent").hide().eq($(this).index()).show()}),$(".m-mainm a:eq(0)").trigger("click"),$(".u-foucscolor").on("mouseenter",function(){$(".u-messnickname").show().css("top",$(this).position().top)}),$(".u-foucscolor").on("mouseleave",function(){$(".u-messnickname").hide()}),$("#cancel").off("click").on("click",function(){$(".u-topupwindow").hide()}),$(".m-mainh a").on("click",function(e){e.preventDefault(),$(this).addClass("").siblings().removeClass(""),$(".switchcontent").hide().eq($(this).index()).show()}),$(".m-mainh a:eq(0)").trigger("click"),$(".u-certification a").on("click",function(e){e.preventDefault(),$(this).addClass("").siblings().removeClass(""),$(".switchrepeat").hide().eq($(this).index()).show()}),$(".u-certification a:eq(0)").trigger("click"),$("#nickname").on("click",function(){$(".m-layer").addClass("z-show")}),$(".lybt .u-btn").on("click",function(){$(this).parents(".m-layer").removeClass("z-show")});var e=$("#messshow").html();"隐藏"==e?$("#show").html("展开"):$("#show").html("隐藏"),$(".u-value div").on("click",function(){$(this).addClass("checktopup").siblings().removeClass("checktopup"),window.checktopup=this}),$("#topupvalue").off("click").on("click",function(e){e.preventDefault(),$(".u-wmtips").text($(window.checktopup).find(".u-vmoney").text().substr(0,$(window.checktopup).find(".u-vmoney").text().length-1)),$(".u-topupwindow").show(),$.ajax({method:"GET",url:"http://localhost:30000/api/pay/recharge",dataType:"json",data:{id:$(window.checktopup).attr("data-id")},success:function(e){0==e.code?(console.log("请求成功"),$("#tovalue").attr("href","/alipay?id="+e.object),$(".u-wn span:eq(1)").text(e.object),1==e.object?console.log("这个重复啦"):0==e.object?console.log("这个不重复"):console.log("未知异常")):e.code==-2?console.log("你没有权限，通常来讲，你是没有登录"):e.code==-5?console.log("参数错误哦。"):console.log(e.result)},error:function(e,s,n){console.log("接口出问题啦")}})});var s={updatePasswordTag_current:!1,updatePasswordTag_new:!1,updatePasswordTag_confirm:!1,iphoneAuth:!1,cur_page:1,cur_pageSize:5,cur_maxPage:1,cur_total:0,cur_pageCallback:null,init:function(){s.eventBind()},eventBind:function(){$("#u-current").off().on("blur",function(){s.updatePasswordTag_current=!1,$("#u-current").parent().find("span").each(function(){$(this).attr("class").indexOf("u-verifypassword")!=-1?$(this).show():$(this).hide()}),$.ajax({method:"GET",url:"http://localhost:30000/api/person-center/is-password-right",dataType:"json",data:{password:$("#u-current").val()},success:function(e){0==e.code?(s.updatePasswordTag_current=!0,$("#u-current").parent().find("span").each(function(){$(this).attr("class").indexOf("u-rightpassword")!=-1?$(this).show():$(this).hide()})):2==e.code?$("#u-current").parent().find("span").each(function(){$(this).attr("class").indexOf("u-failpassword")!=-1?$(this).show():$(this).hide()}):console.log(e.result)},error:function(e,s,n){console.log("接口出问题啦")}})}),$("#u-new").off().on("blur",function(){s.updatePasswordTag_new=!1,1==s.updatePasswordTag_confirm&&$("#u-confirm").trigger("blur"),$(this).val()<=6?$("#u-new").parent().find("span").each(function(){$(this).attr("class").indexOf("u-vpassword")!=-1?$(this).show():$(this).hide()}):(s.updatePasswordTag_new=!0,$("#u-new").parent().find("span").each(function(){$(this).hide()}))}),$("#u-confirm").off().on("blur",function(){s.updatePasswordTag_confirm=!1,$(this).val()===$("#u-new").val()?(s.updatePasswordTag_confirm=!0,$("#u-confirm").parent().find("span").each(function(){$(this).attr("class").indexOf("u-rightpassword")!=-1?$(this).show():$(this).hide()})):$("#u-confirm").parent().find("span").each(function(){$(this).attr("class").indexOf("u-failpassword")!=-1?$(this).show():$(this).hide()})}),$("#send").off().on("click",function(){s.updatePasswordTag_current&&s.updatePasswordTag_new&&s.updatePasswordTag_confirm&&$.ajax({method:"GET",url:"http://localhost:30000/api/person-center/update-password",dataType:"json",data:{oldPassword:$("#u-current").val(),password:$("#u-new").val()},success:function(e){0==e.code?$(".m-psuccess").show():1==e.code?alert("更新失败"):2==e.code?alert("密码错误"):console.log(e.result)},error:function(e,s,n){console.log("接口出问题啦")}})}),$(".m-psuccess").off().on("click",function(e){e.preventDefault(),$(this).hide(),window.location.href=window.location.href}),$("#number").on("focus",function(){$("#gainnumber").show()}),$("#gainnumber").off().on("click",function(){11==$("#number").val().length&&/^(13|15|17|18){1}[0-9]{9}$/.test($("#number").val())?$(".m-mask").show().find(".pic-code img").attr("src","http://localhost:30000/api/checkCode?phone="+$("#number").val()+"&phoneCache="+new Date):alert("手机号不合法")}),$(".m-mask .changePic").off().on("click",function(){$(".m-mask .pic-code img").attr("src","http://localhost:30000/api/checkCode?phone="+$("#number").val())}),$(".m-mask .confirm").off().on("click",function(e){e.preventDefault(),$.ajax({method:"GET",url:"http://localhost:30000/api/sendSMSCode",dataType:"json",data:{imgCheckCode:$(".m-mask .m-input input").val(),mobile:$("#number").val()},success:function(e){0==e.code?$(".m-mask").hide():($(".m-mask .changePic").trigger("click"),alert(e.result))},error:function(e,s,n){console.log("接口出问题啦")}})}),$(".m-mask .cancel").off().on("click",function(){$(".m-mask").hide()}),$("#userbox").off().on("click",function(){""!=$("#verify").val()&&""!=$("#number").val()&&$.ajax({method:"GET",url:"http://localhost:30000/api/person-center/mobile-auth",dataType:"json",data:{checkCode:$("#verify").val(),mobile:$("#number").val()},success:function(e){0==e.code?(alert("认证成功"),window.location.href=window.location.href):1==e.code?alert("更新失败"):2==e.code?alert("手机号已被绑定"):3==e.code?(alert("已绑定手机号"),window.location.href=window.location.href):4==e.code?$("#verify").parent().find("span").each(function(){$(this).attr("class").indexOf("error-tip")!=-1?$(this).show():$(this).hide()}):console.log(e.result)},error:function(e,s,n){console.log("接口出问题啦")}})}),$("#verify").off().on("focus",function(){$(this).parent().find("span").each(function(){$(this).hide()})}),$("#checktips").off().on("focus",function(){$(this).parent().find("span").each(function(){$(this).hide()})}),$(".lybt button").off().on("click",function(){$.ajax({method:"GET",url:"http://localhost:30000/api/person-center/update-nickname",dataType:"json",data:{nickname:$("#checktips").val()},success:function(e){0==e.code?(alert("认证成功"),window.reload(!0)):1==e.code?alert("更新失败"):2==e.code?$("#retips").show():3==e.code?alert("昵称只能免费修改一次"):console.log(e.result)},error:function(e,s,n){console.log("接口出问题啦")}})}),$(".prevBtn").off().on("click",function(e){e.preventDefault(),s.cur_page--,"news"==s.cur_pageCallback?s.newsList():s.followList()}),$(".nextBtn").off().on("click",function(e){e.preventDefault(),s.cur_page++,"news"==s.cur_pageCallback?s.newsList():s.followList()}),$("#myfocusclick").on("click",function(){s.Pagination(1,0,5,"follow"),s.followList()}),$("#mymessageclick").on("click",function(e){e.preventDefault(),s.Pagination(1,0,5,"news"),s.newsList(1)}),$(".u-m-top a:eq(0)").on("click",function(e){e.preventDefault(),s.Pagination(1,0,5,"news"),s.newsList(0)}),$(".u-m-top a:eq(1)").on("click",function(e){e.preventDefault(),s.Pagination(1,0,5,"news"),s.newsList(1)})},Pagination:function(e,n,o,t){s.cur_page=e||1,s.cur_total=n||0,s.cur_pageSize=o||5,s.cur_maxPage=parseInt((s.cur_total+5)/s.cur_pageSize)||1,s.cur_pageCallback=t;var n=n<5?1:parseInt(n/5);$(".prevPage").text(n),$(".nextPage").text(s.cur_page),$(".nextBtn").show(),$(".prevBtn").show(),1==s.cur_page&&$(".prevBtn").hide(),s.cur_page==s.cur_maxPage&&$(".nextBtn").hide(),1==s.cur_maxPage&&($(".prevBtn").hide(),$(".nextBtn").hide())},followList:function(){$.ajax({method:"GET",url:"http://localhost:30000/api/person-center/my-concern",dataType:"json",data:{page:s.cur_page,pageSize:s.cur_pageSize},success:function(e){if(0==e.code){var n="";for(index in e.object.list)n+=1==e.object.list[index].state?'<div class="m-main"><div class="u-host"><div class="u-hleft"><div class="u-focusimg"><img src="'+e.object.list[index].icon+'"></div><div class="u-nickhost"><p class="u-nicksex"><span>'+e.object.list[index].nickname+'</span><img src="'+e.object.list[index].sex+'"></p><div class="u-hostfans"><p><span class="u-hf">直播间ID</span>&nbsp;  <span class="u-num">'+e.object.list[index].room_number+'</span></p><p class="u-hhf"><span class="u-hf">粉丝</span>&nbsp;<span class="u-num">'+e.object.list[index].fans+'</span></p></div></div></div><div class="u-hright"><img src="/images/focusclick.png"><a href="'+e.object.list[index].room_number+'">进入房间</a></div></div>':'<div class="m-main"><div class="u-host stopdark"><div class="u-hleft"><div class="u-focusimg"><img src="'+e.object.list[index].icon+'"></div><div class="u-nickhost"><p class="u-nicksex"><span>'+e.object.list[index].nickname+'</span><img src="'+e.object.list[index].sex+'"></p><div class="u-hostfans"><p><span class="u-hf">直播间ID</span>&nbsp;<span class="u-num">'+e.object.list[index].room_number+'</span></p><p class="u-hhf"><span class="u-hf">粉丝</span>&nbsp;<span class="u-num">'+e.object.list[index].fans+'</span></p></div></div></div><div class="u-hright"><img src="/images/focusclick.png" class="u-blur"><a href="'+e.object.list[index].room_number+'">进入房间</a></div><span class="dark">该主播已离开</span></div>';$(".u-host").remove(),$(".focushost").html($(".focushost").html()+n),s.Pagination(s.cur_page,e.object.total,s.cur_pageSize,"follow")}else console.log(e.result)},error:function(e,s,n){console.log("接口出问题啦")}})},newsList:function(e){$.ajax({method:"GET",url:"http://localhost:30000/api/person-center/my-msg",dataType:"json",data:{page:s.cur_page,pageSize:s.cur_pageSize,type:e},success:function(n){if(0==n.code){if(0==e){var o="";for(index in n.object.list)o+='<div class="u-message"><div class="u-msystem"> <img src="./images/messagehead.png"> </div> <div class="u-yuer"> <p> </p><h3>娱儿官方</h3> <span class="u-messagetime">'+n.object.list[index].create_date+'</span>   <p> </p><p> <span class="u-messagecontent">'+n.object.list[index].content+'</span><span class="u-messtips">全文&gt;&gt;</span>   </p> </div> </div>';$(".messageBox").html(o)}else{var o="";for(index in n.object.list)o+='<div class="u-focusmess"><p class="u-focusnc"><span class="u-foucscolor">我在那里找到你</span><span class="u-focusc">关注了你</span></p><span class="u-focustime">'+n.object.list[index].create_date+'</span></div><div class="u-messnickname"><img src="/images/ico7.png"><p class="u-mkname">我从哪里找到你</p><p><span>ID：</span><span>'+n.object.list[index].obj_id+"</span></p></div>";$(".focusmessage").html(o)}s.Pagination(s.cur_page,100,s.cur_pageSize,"follow")}else console.log(n.result)},error:function(e,s,n){console.log("接口出问题啦")}})}};s.init()}),function(e,s,n){}(window,jQuery)},,,,,,function(e,s){}]);